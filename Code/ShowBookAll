package cn.itcast.cookie.bookhistory;
-
-import java.io.IOException;
-import java.io.PrintWriter;
-import java.util.Map;
-
-import javax.servlet.ServletException;
-import javax.servlet.annotation.WebServlet;
-import javax.servlet.http.HttpServlet;
-import javax.servlet.http.HttpServletRequest;
-import javax.servlet.http.HttpServletResponse;
-import javax.servlet.http.HttpSession;
-
-import org.apache.jasper.tagplugins.jstl.core.Out;
-
-import cn.itcast.domain.Book;
-import cn.itcast.domain.BookDB;
-
-/**
- * Servlet implementation class ShowBookAll
- */
-public class ShowBookAll extends HttpServlet {
-	private static final long serialVersionUID = 1L;
-
-	public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
-	
-		//设置响应正文字符集
-		response.setContentType("text/html;charset=UTF-8");
-		//获取响应输出字符流
-		PrintWriter pw = response.getWriter();
-		//通过执行这个语句，会话打开，服务器知道浏览器是否支持session，
-		//如果浏览器不支持则进行相关的操作,即在地址后边拼接sessionID
-		//这样才能实现客户端禁cookie的数据保持
-		  HttpSession session = request.getSession();
-    //当然如果浏览器支持cookie，上边这句代码就没有必要，而且encodeURL这个方法也没有必要
-    //获取全部图书
-		Map<String,Book> map = BookDB.findAllBook();
-		//遍历图书列表显示
-		for(Map.Entry<String,Book> me: map.entrySet()){
-			
-			String key = me.getKey();
-			Book book = me.getValue();
-			String url = request.getContextPath()+"/BuyServlet?bookid="+key;
-			pw.write("书名:"+book.getName()+"&nbsp;&nbsp;&nbsp;&nbsp;<a href='"+response.encodeURL(url)+"'target='_blank'>加入购物车</a><br>");
-		}
-		pw.write("<hr/>");
-		String url1 = request.getContextPath()+"/ShowCartInfo";
-		pw.write("<a href='"+response.encodeURL(url1)+"' target='_blank'>查看购物车</a><br/>");
-	}
-
-	public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
-		doGet(request, response);
-	}
-
-}
